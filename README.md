# ربات دکمه شیشه‌ای تلگرام (Glass Button Bot)
![Visitor Count](https://komarev.com/ghpvc/?username=Argh94&repo=Telegram_bot&label=بازدیدها)

این پروژه یه ربات تلگرام برای ساخت پیام‌های زیبا با دکمه‌های شیشه‌ای (inline buttons) هست که روی کلودفلر ورکرز (Cloudflare Workers) اجرا می‌شه. هدفش اینه که به کاربرا اجازه بده به‌راحتی پیام‌هایی با تصویر، کپشن و دکمه‌های لینک‌دار بسازن و به کانال یا گروه دلخواهشون بفرستن.

---

## نحوه ساخت ربات

برای ساختن این ربات یا راه‌اندازی نسخه خودتون، این مراحل رو دنبال کنید:

1. **ساخت ربات در تلگرام:**
   - به `@BotFather` توی تلگرام پیام بدید و با دستور `/newbot` یه ربات بسازید.
   - یه اسم (مثل `MyGlassButtonBot`) و یه نام کاربری (مثل `@MyGlassButtonBot`) انتخاب کنید.
   - توکن ربات رو از BotFather بگیرید (مثل `7753602587:AAHdJ1AlIlwmwQMSNKK-JYkkaA9cpp7VFdg`).

2. **تنظیم کلودفلر ورکرز:**
   - یه حساب کلودفلر بسازید و به بخش Workers برید.
   - یه Worker جدید بسازید (مثل `glass-button-bot`).
   - کد این پروژه (فایل `index.js`) رو توی ویرایشگر Worker کپی کنید.
   - توکن ربات رو توی خط `const TELEGRAM_TOKEN` جایگزین کنید.
   - نام کاربری ربات رو توی `const BOT_USERNAME` بذارید (مثل `MyGlassButtonBot`).

3. **تنظیم KV Storage:**
   - توی کلودفلر، یه KV Namespace بسازید (مثل `BOT_DATA`) برای ذخیره حالت‌ها، پیام‌ها و آمار.
   - توی تنظیمات Worker، این KV رو به پروژه بایند کنید (اسمش باید `BOT_DATA` باشه).

4. **اتصال به تلگرام:**
   - یه درخواست HTTP POST به آدرس زیر بفرستید تا وب‌هوک ربات رو تنظیم کنید:
     ```
     https://api.telegram.org/bot<توکن_ربات>/setWebhook?url=https://<اسم_ورکر>.workers.dev/webhook
     ```
     مثلاً:
     ```
     https://api.telegram.org/bot7753602587:AAHdJ1AlIlwmwQMSNKK-JYkkaA9cpp7VFdg/setWebhook?url=https://glass-button-bot.yourdomain.workers.dev/webhook
     ```

5. **تست ربات:**
   - توی تلگرام، به رباتتون پیام بدید و با `/start` شروع کنید.
   - مطمئن بشید ربات ادمین کانال یا گروه مقصدتون باشه تا بتونه پیام بفرسته.

---

## قابلیت‌های ربات

این ربات امکانات زیر رو داره:

- **ساخت پیام با دکمه‌های شیشه‌ای:**
  - می‌تونید یه تصویر (اختیاری)، کپشن (اختیاری)، و هر تعداد دکمه شیشه‌ای با لینک بسازید.
  - جریان کار: `/start` → تصویر یا `/skip` → کپشن یا `/skip` → برچسب و لینک دکمه → `/preview`.

- **مقصد پیش‌فرض:**
  - با `/settarget` می‌تونید یه کانال یا گروه (مثل `@MyChannel` یا `-123456`) رو به‌عنوان مقصد ثبت کنید.

- **پیش‌نمایش و ارسال:**
  - با `/preview` پیش‌نمایش پیام رو می‌بینید و با "✅ تایید و ارسال" به مقصد می‌فرستید یا با "❌ انصراف" لغو می‌کنید.

- **لینک اختصاصی:**
  - بعد از ارسال، یه لینک منحصربه‌فرد (مثل `https://t.me/MyGlassButtonBot?start=abc123`) می‌گیرید که آمار کلیک‌هاش ثبت می‌شه.

- **مدیریت دکمه‌ها:**
  - می‌تونید با "افزودن دکمه دیگر" هر تعداد دکمه که می‌خواید اضافه کنید.
  - لینک‌ها باید معتبر باشن (مثل `https://...`).

- **لغو عملیات:**
  - با `/cancel` هر وقت بخواید می‌تونید فرایند رو لغو کنید.

- **راهنما:**
  - با `/help` لیست دستورات رو ببینید:
    ```
    🔍 راهنمای ربات:
    /start - شروع
    /skip - رد کردن
    /preview - پیش‌نمایش و ارسال
    /settarget - تنظیم مقصد پیش‌فرض
    /help - راهنما
    /cancel - لغو
    ```

- **پنل ادمین:**
  - با `/admin` و رمز (پیش‌فرض: `123456`) وارد پنل بشید:
    - **📋 مشاهده پیام‌ها:** تا 10 پیام آخر با جزئیات.
    - **📊 آمار:** تعداد پیام‌ها، کلیک‌ها و کاربران.
    - **👥 کاربران:** لیست کاربران و تعداد پیام‌هاشون.
    - **❌ خروج:** برگشت به حالت عادی.

---

## درباره پروژه

- **هدف:** این ربات برای کسایی طراحی شده که می‌خوان پیام‌های جذاب با دکمه‌های لینک‌دار توی تلگرام بسازن و به کانال یا گروهشون بفرستن. ساده، کاربردی و قابل توسعه‌ست.
- **فناوری:**
  - **زبان:** JavaScript
  - **پلتفرم:** Cloudflare Workers
  - **ذخیره‌سازی:** Cloudflare KV برای مدیریت حالت‌ها و داده‌ها
  - **API:** Telegram Bot API
- **ویژگی‌ها:**
  - فقط توی چت خصوصی کار می‌کنه (برای جلوگیری از تداخل با کانال‌ها).
  - از حالت‌های مختلف (States) برای مدیریت فرایند استفاده می‌کنه.
  - خطاها رو مدیریت می‌کنه (مثل لینک نامعتبر یا مشکل ارسال).
- **توسعه‌دهنده:** این پروژه توسط [اسم خودت رو بذار] ساخته شده و با کمک هوش مصنوعی Grok (xAI) بهینه‌سازی شده.
- **لایسنس:** [لایسنس دلخواهت رو انتخاب کن، مثلاً MIT] - آزاد برای استفاده و تغییر با ذکر منبع.

---

## چطور استفاده کنم؟

1. توی چت خصوصی با ربات، `/start` رو بزنید.
2. تصویر، کپشن و دکمه‌ها رو اضافه کنید.
3. با `/settarget` مقصد رو مشخص کنید (مثل `@MyChannel`).
4. با `/preview` پیش‌نمایش رو ببینید و تأیید کنید.
5. لینک اختصاصی رو بگیرید و به اشتراک بذارید!

---

## توسعه بیشتر

اگه می‌خواید به پروژه اضافه کنید:
- پشتیبانی از گروه‌ها یا کانال‌ها (حذف فیلتر `channel_post`).
- اضافه کردن استایل بیشتر به دکمه‌ها.
- امکان آپلود چند تصویر.
- تغییر رمز ادمین از طریق ربات.

هر ایده یا مشکلی داشتید، توی Issues گیت‌هاب بگید یا Pull Request بفرستید!

---

سپاس از شما که از این پروژه استفاده می‌کنید! امیدوارم براتون مفید باشه.


